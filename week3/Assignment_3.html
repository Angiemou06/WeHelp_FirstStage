<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assignment_3</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
</head>

<body class="body">
    <div class="top">
        <div class="title">
            My Website
        </div>
        <div class="menu">
            <div class="I1">
                Item 1
            </div>
            <div class="I2">
                Item 2
            </div>
            <div class="I3">
                Item 3
            </div>
            <div class="I4">
                Item 4
            </div>
        </div>
        <img class="hamberger"
            src="https://cdn2.iconfinder.com/data/icons/flat-general-office/91/General_Office_30-512.png"
            height="25px" />
    </div>
    <div class="welcome">
        <div class="welcome_text">
            Welcome to MyHome
        </div>
    </div>
    <div class="main_1">
        <div class="main_2">
            <div class="main_3_1" id="parentDiv1">
                <img class="img_top" src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1770&q=80" />
                <div class="Promotion">Promotion 1</div>
            </div>
            <div class="main_3_2" id="parentDiv2">
                <img class="img_top" src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1770&q=80" />
                <div class="Promotion">Promotion 2</div>
            </div>
            <div class="main_3_3" id="parentDiv3">
                <img class="img_top" src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1770&q=80" />
                <div class="Promotion">Promotion 3</div>
            </div>

        </div>

    </div>
    <div class="main_4">
        <div class="main_5">
            <div class="grid_1" id="parentDiv4">
                <img class="img" src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1770&q=80" />
                <div class="name">Title 1</div>
            </div>
            <div class="grid_2" id="parentDiv5">
                <img class="img" src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1770&q=80" />
                <div class="name">Title 2</div>
            </div>
            <div class="grid_3" id="parentDiv6">
                <img class="img" src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1770&q=80" />
                <div class="name">Title 3</div>
            </div>
            <div class="grid_4" id="parentDiv7">
                <img class="img" src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1770&q=80" />
                <div class="name">Title 4</div>
            </div>
            <div class="grid_5" id="parentDiv8">
                <img class="img" src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1770&q=80" />
                <div class="name">Title 5</div>
            </div>
            <div class="grid_6" id="parentDiv9">
                <img class="img" src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1770&q=80" />
                <div class="name">Title 6</div>
            </div>
            <div class="grid_7" id="parentDiv10">
                <img class="img" src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1770&q=80" />
                <div class="name">Title 7</div>
            </div>
            <div class="grid_8" id="parentDiv11">
                <img class="img" src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1770&q=80" />
                <div class="name">Title 8</div>
            </div>
            <div class="grid_9" id="parentDiv12">
                <img class="img" src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1770&q=80" />
                <div class="name">Title 9</div>
            </div>
            <div class="grid_10" id="parentDiv13">
                <img class="img" src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1770&q=80" />
                <div class="name">Title 10</div>
            </div>
            <div class="grid_11" id="parentDiv14">
                <img class="img" src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1770&q=80" />
                <div class="name">Title 11</div>
            </div>
            <div class="grid_12" id="parentDiv15">
                <img class="img" src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1770&q=80" />
                <div class="name">Title 12</div>
            </div>
        </div>
    </div>

    <script>
        let replaceElements = [];
        for(let i=1;i<16;i++){
            replaceElements.push("parentDiv"+i);
        }
        let src = "https://padax.github.io/taipei-day-trip-resources/taipei-attractions-assignment.json";
        function updateElementContent(parentId, content){  
            let parentDiv = document.getElementById(parentId);
            let newText = document.createElement("div");
            newText.textContent = content;
            if (parentDiv) {
                    let secondParagraph = parentDiv.getElementsByTagName("div")[0];
                    let cssClass = secondParagraph.classList;
                    newText.classList.add(...cssClass);
                    parentDiv.removeChild(secondParagraph);
                    parentDiv.appendChild(newText);
            }     
        }
        function updateElementImage(parentId, url){  
            let parentDiv = document.getElementById(parentId);
            let newImage = document.createElement("img");
            newImage.src = url;

            if (parentDiv) {
                    let existingImage = parentDiv.getElementsByTagName("img")[0];
                    newImage.className = existingImage.className;
                    parentDiv.replaceChild(newImage, existingImage);
                    
            }     
        }
        async function fetchData() {
            let response = await fetch(src);
            let data = await response.json();
            let data_list = data["result"]["results"];
            for (let i=0;i<data_list.length;i++){
                let name_data = data_list[i]["stitle"];
                let item = replaceElements[i];
                updateElementContent(item, name_data);
                let url_data = data_list[i]["file"];
                url_data = url_data.toLowerCase();
                position = url_data.search(".jpg");
                url_data = url_data.substr(0,position+4);
                updateElementImage(item, url_data);
            }
        }
        fetchData();
    </script>


</body>

</html>